<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–µ–¥–µ—Ä–∞—Ü–∏—è –≤–æ–∑–¥—É—à–Ω–æ-—Å–∏–ª–æ–≤–æ–π –∞—Ç–ª–µ—Ç–∏–∫–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .athlete-card {
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .athlete-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .athlete-main-info {
            flex: 1;
        }
        .status-approved {
            color: #28a745;
            font-weight: bold;
            font-size: 1.3em;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background-color: #f0fff4;
            border-radius: 8px;
        }
        .status-rejected {
            color: #dc3545;
            font-weight: bold;
            font-size: 1.3em;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background-color: #fff0f0;
            border-radius: 8px;
        }
        .photo {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #333;
        }
        .loading {
            text-align: center;
            font-size: 1.2em;
            color: #666;
            padding: 40px;
        }
        .section {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .personal-info {
            color: #666;
            margin: 5px 0;
        }
        .error {
            background: #ffe6e6;
            border: 1px solid #ffcccc;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        .info-item {
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <h1>üèÜ –§–µ–¥–µ—Ä–∞—Ü–∏—è –≤–æ–∑–¥—É—à–Ω–æ-—Å–∏–ª–æ–≤–æ–π –∞—Ç–ª–µ—Ç–∏–∫–∏</h1>
    <div id="athlete-info">
        <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞...</p>
    </div>

    <script>
        // URL –≤–∞—à–µ–≥–æ Google Apps Script –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLxq1SOvYxs6J_7yj7QQvgZKjCQHyWTEpriuRoGnj_GLM0tQ_WpQCgNM19alfPxuRXag/exec';
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ID —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞ –∏–∑ URL
        function getAthleteId() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id') || '1';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Google Apps Script
        async function loadAthleteData() {
            const athleteId = getAthleteId();
            
            try {
                const response = await fetch(`${SCRIPT_URL}?id=${athleteId}`);
                const result = await response.json();
                
                if (result.success && result.data) {
                    displayAthleteData(result.data);
                } else {
                    showError(result.error || '–°–ø–æ—Ä—Ç—Å–º–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showError('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É: ' + error.message);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
        function displayAthleteData(data) {
            console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', data);
            
            // –ü—Ä–∏–≤–æ–¥–∏–º –∫–ª—é—á–∏ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
            const normalizedData = {};
            Object.keys(data).forEach(key => {
                normalizedData[key.toLowerCase()] = data[key];
            });
            
            const athlete = normalizedData;
            const statusClass = athlete.–¥–æ–ø—É—Å–∫ === "‚úÖ" ? "status-approved" : "status-rejected";
            const statusText = athlete.–¥–æ–ø—É—Å–∫ === "‚úÖ" ? "–î–û–ü–£–°–ö –ü–û–î–¢–í–ï–†–ñ–î–ï–ù" : "–î–û–ü–£–°–ö –ó–ê–ü–†–ï–©–ï–ù";

            const html = `
                <div class="athlete-card">
                    <div class="athlete-header">
                        <div class="athlete-main-info">
                            <h2>${athlete.—Ñ–∏–æ || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</h2>
                            <p class="personal-info">
                                <strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> ${athlete.–¥–∞—Ç–∞_—Ä–æ–∂–¥–µ–Ω–∏—è || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}
                            </p>
                        </div>
                    </div>
                    
                    <div class="${statusClass}">${statusText}</div>
                    
                    <div class="section">
                        <h3>üìã –î–æ–ø—É—Å–∫–∏ –∫ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º:</h3>
                        <p>üè• –ú–µ–¥—Å–ø—Ä–∞–≤–∫–∞: ${athlete.—Å—Ç–∞—Ç—É—Å_–º–µ–¥—Å–ø—Ä–∞–≤–∫–∏ || '‚ùå'}</p>
                        <p>üìÑ –°—Ç—Ä–∞—Ö–æ–≤–∫–∞: ${athlete.—Å—Ç–∞—Ç—É—Å_—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ || '‚ùå'}</p>
                        <p>üí∞ –ß–ª–µ–Ω—Å–∫–∏–π –≤–∑–Ω–æ—Å: ${athlete.—á–ª–µ–Ω—Å–∫–∏–π_–≤–∑–Ω–æ—Å || '‚ùå'}</p>
                    </div>
                    
                    <div class="section">
                        <h3>üèÖ –°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
                        ${athlete.–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ ? `<div class="info-item"><strong>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:</strong> ${athlete.–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞}</div>` : ''}
                        <div class="info-grid">
                            <div class="info-item">
                                <strong>–†–µ–π—Ç–∏–Ω–≥:</strong><br>${athlete.—Ä–µ–π—Ç–∏–Ω–≥ || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                            </div>
                            <div class="info-item">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong><br>${athlete.—Ç–µ–ª–µ—Ñ–æ–Ω || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                            </div>
                        </div>
                        <div style="margin-top: 15px;">
                            <p><strong>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</strong> ${athlete.–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è || '–ù–µ—Ç'}</p>
                            <p><strong>–≠–ª–µ–º–µ–Ω—Ç—ã:</strong> ${athlete.—ç–ª–µ–º–µ–Ω—Ç—ã || '–ù–µ—Ç'}</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                        <small>ID —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞: ${athlete.id} | –û–±–Ω–æ–≤–ª–µ–Ω–æ: ${new Date().toLocaleString()}</small>
                    </div>
                </div>
            `;

            document.getElementById('athlete-info').innerHTML = html;
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏
        function showError(message) {
            document.getElementById('athlete-info').innerHTML = `
                <div class="error">
                    <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                    <p>${message}</p>
                    <button onclick="location.reload()" style="padding: 10px 20px; margin-top: 10px;">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
                </div>
            `;
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = loadAthleteData;
    </script>
</body>
</html>
